<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LibreTV åµŒå¥—æµ‹è¯•é¡µé¢</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      text-align: center;
    }

    .tabs {
      display: flex;
      background: #f8f9fa;
      border-bottom: 1px solid #dee2e6;
    }

    .tab {
      flex: 1;
      padding: 15px 20px;
      background: #f8f9fa;
      border: none;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .tab.active {
      background: white;
      border-bottom: 3px solid #667eea;
      color: #667eea;
      font-weight: bold;
    }

    .tab:hover {
      background: #e9ecef;
    }

    .tab-content {
      display: none;
      min-height: 800px;
    }

    .tab-content.active {
      display: block;
    }

    .movie-iframe-container {
      width: 100%;
      height: 800px;
      position: relative;
    }

    #movie-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .info-content {
      padding: 40px;
      text-align: center;
    }

    .info-content h2 {
      color: #333;
      margin-bottom: 20px;
    }

    .info-content p {
      color: #666;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .test-buttons {
      margin: 20px;
      text-align: center;
    }

    .test-btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 0 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .test-btn:hover {
      background: #5a6fd8;
    }

    .status {
      margin: 20px;
      padding: 15px;
      background: #e8f4f8;
      border-left: 4px solid #17a2b8;
      border-radius: 4px;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ¬ å½±è§†å¨±ä¹å¹³å°</h1>
      <p>é›†æˆå¤šç§å½±è§†èµ„æºï¼Œä¸ºæ‚¨æä¾›ä¸€ç«™å¼è§‚å½±ä½“éªŒ</p>
    </div>

    <div class="test-buttons">
      <button class="test-btn" onclick="reloadIframe()">é‡æ–°åŠ è½½</button>
      <button class="test-btn" onclick="testScroll()">æµ‹è¯•æ»šåŠ¨</button>
      <button class="test-btn" onclick="toggleFullscreen()">å…¨å±æ¨¡å¼</button>
    </div>

    <div class="status" id="status">
      <strong>çŠ¶æ€ï¼š</strong>æ­£åœ¨åŠ è½½ LibreTV...
    </div>

    <div class="tabs">
      <button class="tab active" onclick="showTab('movie')">ğŸ­ åœ¨çº¿å½±è§†</button>
      <button class="tab" onclick="showTab('info')">â„¹ï¸ å…³äºé¡¹ç›®</button>
    </div>

    <div class="tab-contents">
      <!-- ç”µå½±Tabå†…å®¹ -->
      <div id="movie-content" class="tab-content active">
        <div class="movie-iframe-container">
          <iframe id="movie-iframe" src="http://192.168.1.125:5003/" frameborder="0" allowfullscreen
            sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-top-navigation"
            loading="lazy">
          </iframe>
        </div>
      </div>

      <!-- ä¿¡æ¯Tabå†…å®¹ -->
      <div id="info-content" class="tab-content">
        <div class="info-content">
          <h2>å…³äº LibreTV</h2>
          <p>LibreTV æ˜¯ä¸€ä¸ªå…è´¹çš„åœ¨çº¿è§†é¢‘æœç´¢ä¸è§‚çœ‹å¹³å°ï¼Œæä¾›æ¥è‡ªå¤šä¸ªè§†é¢‘æºçš„å†…å®¹æœç´¢ä¸æ’­æ”¾æœåŠ¡ã€‚</p>
          <p>ğŸ¯ <strong>ä¸»è¦ç‰¹æ€§ï¼š</strong></p>
          <p>â€¢ æ— éœ€æ³¨å†Œï¼Œå³å¼€å³ç”¨</p>
          <p>â€¢ å¤šæºèšåˆæœç´¢</p>
          <p>â€¢ æ”¯æŒè±†ç“£çƒ­é—¨æ¨è</p>
          <p>â€¢ æ— é™æ»šåŠ¨è‡ªåŠ¨åŠ è½½</p>
          <p>â€¢ è‡ªåŠ¨æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½</p>
          <p>â€¢ å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šè®¾å¤‡</p>

          <h2>åµŒå¥—æµ‹è¯•è¯´æ˜</h2>
          <p>å½“å‰é¡µé¢ç”¨äºæµ‹è¯• LibreTV åœ¨ iframe ä¸­çš„æ»šåŠ¨åŠŸèƒ½å’Œäº¤äº’ä½“éªŒã€‚</p>
          <p>å¦‚æœå‘ç°æ»šåŠ¨æ— æ³•è§¦å‘è‡ªåŠ¨åŠ è½½ï¼Œè¯·æ£€æŸ¥ iframe çš„æ»šåŠ¨äº‹ä»¶ç›‘å¬ã€‚</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Tabåˆ‡æ¢åŠŸèƒ½
    function showTab(tabName) {
      // éšè—æ‰€æœ‰tabå†…å®¹
      const contents = document.querySelectorAll('.tab-content');
      contents.forEach(content => content.classList.remove('active'));

      // ç§»é™¤æ‰€æœ‰tabçš„activeçŠ¶æ€
      const tabs = document.querySelectorAll('.tab');
      tabs.forEach(tab => tab.classList.remove('active'));

      // æ˜¾ç¤ºé€‰ä¸­çš„tabå†…å®¹
      document.getElementById(tabName + '-content').classList.add('active');

      // è®¾ç½®é€‰ä¸­çš„tabä¸ºactive
      event.target.classList.add('active');
    }

    // é‡æ–°åŠ è½½iframe
    function reloadIframe() {
      const iframe = document.getElementById('movie-iframe');
      iframe.src = iframe.src;
      updateStatus('æ­£åœ¨é‡æ–°åŠ è½½...');
    }

    // æµ‹è¯•æ»šåŠ¨åŠŸèƒ½
    function testScroll() {
      const iframe = document.getElementById('movie-iframe');
      try {
        // å‘iframeå‘é€æ¶ˆæ¯æµ‹è¯•æ»šåŠ¨
        iframe.contentWindow.postMessage({
          type: 'TEST_SCROLL',
          message: 'æµ‹è¯•æ»šåŠ¨åŠŸèƒ½'
        }, '*');
        updateStatus('å·²å‘é€æ»šåŠ¨æµ‹è¯•æ¶ˆæ¯åˆ°iframe');
      } catch (e) {
        updateStatus('æ— æ³•ä¸iframeé€šä¿¡ï¼Œå¯èƒ½å­˜åœ¨è·¨åŸŸé™åˆ¶');
      }
    }

    // åˆ‡æ¢å…¨å±
    function toggleFullscreen() {
      const container = document.querySelector('.movie-iframe-container');
      if (document.fullscreenElement) {
        document.exitFullscreen();
        updateStatus('é€€å‡ºå…¨å±æ¨¡å¼');
      } else {
        container.requestFullscreen().then(() => {
          updateStatus('è¿›å…¥å…¨å±æ¨¡å¼');
        }).catch(err => {
          updateStatus('æ— æ³•è¿›å…¥å…¨å±æ¨¡å¼: ' + err.message);
        });
      }
    }

    // æ›´æ–°çŠ¶æ€ä¿¡æ¯
    function updateStatus(message) {
      const status = document.getElementById('status');
      const timestamp = new Date().toLocaleTimeString();
      status.innerHTML = `<strong>çŠ¶æ€ï¼š</strong>${message} <small>(${timestamp})</small>`;
    }

    // ç›‘å¬iframeåŠ è½½äº‹ä»¶
    document.getElementById('movie-iframe').addEventListener('load', function () {
      updateStatus('LibreTV åŠ è½½å®Œæˆ');
    });

    // ç›‘å¬iframeé”™è¯¯äº‹ä»¶
    document.getElementById('movie-iframe').addEventListener('error', function () {
      updateStatus('LibreTV åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
    });

    // ç›‘å¬æ¥è‡ªiframeçš„æ¶ˆæ¯
    window.addEventListener('message', function (event) {
      // åªæ¥å—æ¥è‡ªæŒ‡å®šæºçš„æ¶ˆæ¯
      if (event.origin !== 'http://192.168.1.125:5003') {
        return;
      }

      console.log('æ”¶åˆ°iframeæ¶ˆæ¯:', event.data);
      updateStatus('æ”¶åˆ°iframeæ¶ˆæ¯: ' + JSON.stringify(event.data));
    });

    // é¡µé¢åŠ è½½å®Œæˆ
    document.addEventListener('DOMContentLoaded', function () {
      updateStatus('æµ‹è¯•é¡µé¢å·²å‡†å¤‡å°±ç»ª');
    });
  </script>
</body>

</html>