# 本地开发环境密码设置指南

## 🔧 设置方法

### 方法一：命令行环境变量（推荐）

**Windows PowerShell:**
```powershell
$env:PASSWORD="123456"
npm run dev
```

**Windows CMD:**
```cmd
set PASSWORD=123456 && npm run dev
```

**macOS/Linux/Git Bash:**
```bash
PASSWORD=123456 npm run dev
```

### 方法二：创建 .env 文件

1. 在项目根目录创建 `.env` 文件：
```bash
# .env 文件内容
PASSWORD=123456
PORT=8080
```

2. 运行开发服务器：
```bash
npm run dev
```

## 🚀 启动效果

### 设置密码后的启动信息：
```
已加载 .env 文件
服务器运行在 http://localhost:8080
==================================================
🔒 密码保护已启用
📝 访问密码: 123456
==================================================
```

### 未设置密码的启动信息：
```
未找到 .env 文件，使用系统环境变量
服务器运行在 http://localhost:8080
==================================================
🌐 公开访问模式
==================================================
```

## 🔍 测试步骤

1. **启动服务器**（使用上述任一方法）
2. **打开浏览器**访问 `http://localhost:8080`
3. **如果设置了密码**：
   - 会弹出密码验证框
   - 输入设置的密码（如：123456）
   - 验证成功后可正常使用
4. **如果未设置密码**：
   - 直接进入网站，无需验证

## 📝 .env 文件示例

创建 `.env` 文件（推荐方法）：

```bash
# LibreTV 本地开发配置
# 设置访问密码（留空或删除此行则为公开访问）
PASSWORD=your_password_here

# 可选：自定义端口（默认8080）
PORT=8080

# 使用说明：
# 1. 修改 PASSWORD 为您想要的密码
# 2. 运行 npm run dev
# 3. 访问 http://localhost:8080
# 4. 输入密码即可访问
```

## 🔐 密码验证特性

- **SHA-256 加密**：密码经过哈希加密，安全性高
- **90天有效期**：验证成功后90天内无需重复输入
- **实时生效**：修改密码后重启服务器即可生效
- **可选功能**：不设置密码则为公开访问

## 🛠️ 故障排除

### 问题1：密码验证框不出现
- 检查是否正确设置了 `PASSWORD` 环境变量
- 确认服务器启动时显示"密码保护已启用"

### 问题2：输入密码后提示错误
- 确认输入的密码与设置的密码完全一致
- 检查密码中是否包含特殊字符

### 问题3：修改密码不生效
- 重启开发服务器 (`Ctrl+C` 然后重新 `npm run dev`)
- 清除浏览器缓存或使用无痕模式

## 🎯 快速测试命令

```bash
# 测试密码保护
PASSWORD=test123 npm run dev

# 测试公开访问
npm run dev
``` 